<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ZOMBIE STRIKE: ELITE v2.0</title>
    <style>
        :root { --gold: #f1c40f; --army: #4b5320; --blue: #2196f3; --dark: #0a0a0a; --panel: rgba(20, 20, 20, 0.95); }
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Segoe UI', sans-serif; color: white; }
        
        /* Tactical HUD */
        #hud { position: absolute; top: 20px; left: 20px; width: 300px; padding: 20px; background: var(--panel); border-left: 5px solid var(--gold); border-radius: 4px; display: none; z-index: 100; }
        .mc-display { color: var(--gold); font-size: 34px; font-weight: 900; }
        .bar { width: 100%; height: 10px; background: #222; margin-top: 15px; border-radius: 5px; overflow: hidden; }
        #hp-fill { height: 100%; background: #2ecc71; width: 100%; transition: width 0.3s; }

        /* Full Menu System */
        #menu { position: absolute; inset: 0; background: linear-gradient(135deg, #1a1a2e, #16213e); display: flex; flex-direction: column; align-items: center; padding: 40px; z-index: 2000; overflow-y: auto; }
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; width: 100%; max-width: 1000px; }
        .panel { background: var(--panel); padding: 20px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1); }
        .option { padding: 10px; margin: 5px 0; background: #222; cursor: pointer; border-radius: 5px; text-align: center; }
        .option.active { border: 2px solid var(--blue); background: #2a2a3a; }
        
        .skin-circle { width: 30px; height: 30px; border-radius: 50%; display: inline-block; margin: 5px; border: 2px solid transparent; cursor: pointer; }
        .skin-circle.active { border-color: white; transform: scale(1.2); }

        .play-btn { background: var(--gold); color: #000; padding: 20px 100px; font-size: 32px; font-weight: 900; border: none; border-radius: 10px; cursor: pointer; margin-top: 30px; }

        #perf { position: absolute; top: 10px; right: 10px; color: #0f0; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>

<div id="perf">FPS: <span id="fps-val">60</span></div>

<div id="menu">
    <h1 style="font-size: 50px; margin-bottom: 20px;">ZOMBIE STRIKE: ELITE</h1>
    
    <div class="grid">
        <div class="panel">
            <h3>üéÆ GAME MODE</h3>
            <div class="option active" onclick="setMode('Normal', this)">Normal</div>
            <div class="option" onclick="setMode('Endless', this)">Endless</div>
            <div class="option" onclick="setMode('Challenge', this)">Challenge</div>
        </div>

        <div class="panel">
            <h3>‚öîÔ∏è DIFFICULTY</h3>
            <div class="option" onclick="setDiff('Easy', this)">Easy</div>
            <div class="option active" onclick="setDiff('Normal', this)">Normal</div>
            <div class="option" onclick="setDiff('Nightmare', this)">Nightmare</div>
        </div>

        <div class="panel">
            <h3>üé® PLAYER SKIN</h3>
            <div class="skin-circle active" style="background:#4b5320" onclick="setSkin(0x4b5320, this)"></div>
            <div class="skin-circle" style="background:#3498db" onclick="setSkin(0x3498db, this)"></div>
            <div class="skin-circle" style="background:#e74c3c" onclick="setSkin(0xe74c3c, this)"></div>
            <div class="skin-circle" style="background:#f1c40f" onclick="setSkin(0xf1c40f, this)"></div>
            <div class="skin-circle" style="background:#9b59b6" onclick="setSkin(0x9b59b6, this)"></div>
        </div>

        <div class="panel">
            <h3>üî´ WEAPON SKIN</h3>
            <div class="option active" onclick="setWep('Normal', this)">Normal</div>
            <div class="option" style="color:var(--gold)" onclick="setWep('Gold', this)">Gold</div>
            <div class="option" style="color:#00ffff" onclick="setWep('Neon', this)">Neon</div>
        </div>
    </div>

    <button class="play-btn" onclick="initializeGame()">‚ñ∂ INITIALIZE</button>
</div>

<div id="hud">
    <div class="mc-display">üí∞ $<span id="mc-val">2500</span></div>
    <div style="font-size:10px; opacity:0.6; margin-top:5px; letter-spacing:2px;">STATUS: ACTIVE</div>
    <div class="bar"><div id="hp-fill"></div></div>
    <div id="wave-val" style="margin-top:10px; font-weight:bold;">WAVE 1</div>
</div>

<canvas id="c"></canvas>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
    // --- DATA & STATE ---
    const State = {
        mc: 2500, hp: 100, maxHp: 100, wave: 1, streak: 0,
        mode: 'Normal', diff: 'Normal', 
        playerColor: 0x4b5320, weaponSkin: 'Normal',
        active: false,
        fps: 0, lastTime: performance.now(), frames: 0
    };

    // --- SELECTION LOGIC ---
    function setMode(m, el) { select(el); State.mode = m; }
    function setDiff(d, el) { select(el); State.diff = d; }
    function setWep(w, el) { select(el); State.weaponSkin = w; }
    function setSkin(c, el) {
        document.querySelectorAll('.skin-circle').forEach(s => s.classList.remove('active'));
        el.classList.add('active');
        State.playerColor = c;
    }
    function select(el) {
        el.parentElement.querySelectorAll('.option').forEach(o => o.classList.remove('active'));
        el.classList.add('active');
    }

    // --- GAME ENGINE ---
    let scene, camera, renderer, player, enemies = [];

    function initializeGame() {
        document.getElementById('menu').style.display = 'none';
        document.getElementById('hud').style.display = 'block';
        State.active = true;

        // Scene Setup
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('c'), antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);

        // Environment
        const ground = new THREE.Mesh(new THREE.PlaneGeometry(100, 100), new THREE.MeshStandardMaterial({ color: 0x111111 }));
        ground.rotation.x = -Math.PI / 2;
        scene.add(ground);
        scene.add(new THREE.AmbientLight(0xffffff, 0.5));
        const dirLight = new THREE.DirectionalLight(0xffffff, 1);
        dirLight.position.set(5, 10, 5);
        scene.add(dirLight);

        // Player with selected Skin
        player = new THREE.Mesh(
            new THREE.BoxGeometry(1, 2, 1), 
            new THREE.MeshStandardMaterial({ color: State.playerColor })
        );
        player.position.y = 1;
        scene.add(player);

        // Weapon with skin
        const wepColor = State.weaponSkin === 'Gold' ? 0xffd700 : (State.weaponSkin === 'Neon' ? 0x00ffff : 0x333333);
        const gun = new THREE.Mesh(new THREE.BoxGeometry(0.3, 0.3, 1), new THREE.MeshStandardMaterial({ color: wepColor }));
        gun.position.set(0.6, 0.5, 0.5);
        player.add(gun);

        camera.position.set(0, 15, 12);
        camera.lookAt(player.position);

        spawnWave();
        animate();
    }

    function spawnWave() {
        const count = State.mode === 'Endless' ? 20 : (5 + State.wave * 2);
        for(let i=0; i<count; i++) {
            const z = new THREE.Mesh(new THREE.BoxGeometry(1, 2, 1), new THREE.MeshStandardMaterial({ color: 0x7a9a64 }));
            z.position.set(Math.random() * 40 - 20, 1, Math.random() * 40 - 20);
            scene.add(z);
            enemies.push(z);
        }
    }

    function animate() {
        if (!State.active) return;
        requestAnimationFrame(animate);

        // Performance Monitor
        State.frames++;
        const now = performance.now();
        if (now >= State.lastTime + 1000) {
            document.getElementById('fps-val').innerText = State.frames;
            State.frames = 0;
            State.lastTime = now;
        }

        // Simple Enemy AI
        enemies.forEach(z => {
            z.lookAt(player.position);
            z.translateZ(State.diff === 'Nightmare' ? 0.08 : 0.03);
        });

        // UI Updates
        document.getElementById('mc-val').innerText = Math.floor(State.mc);
        document.getElementById('hp-fill').style.width = State.hp + '%';

        renderer.render(scene, camera);
    }

    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
</script>
</body>
</html>
